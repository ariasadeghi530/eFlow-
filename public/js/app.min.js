$("#search").click(function (a) { a.preventDefault(), $("#searchForm").val() || ($("#search").toggle(), $("#close").toggle(), $("#searchForm").toggle(), $(".uk-logo").toggle(), $(".uk-form-icon").toggle()) }), $("#close").click(function (a) { a.preventDefault(), $("#searchForm").val() && $("#searchForm").val(""), $("#close").toggle(), $("#search").toggle(), $("#searchForm").toggle(), $(".uk-logo").toggle(), $(".uk-form-icon").toggle() }), $(document).on("keypress", function (a) { if (13 == a.which) { if ($("#searchForm").val()) { event.preventDefault(); let a = $("#searchForm").val(); "" === a && (a = "EmptySearchStringParameter"), window.location.href = `/searchCollections/${a}` } $("#searchForm").val("") } }); let UserInfo; axios.get(`/api/users/getinfo`).then(({ data: a }) => { UserInfo = a, $("#side-username").text(a.username), $("#profile-username").text(a.username), $("#profile-name").text(`${a.first_name} ${a.last_name}`), $("#profile-email").text(a.email), $("#profile-edit-username").val(a.username), $("#profile-name-first").val(a.first_name), $("#profile-name-last").val(a.last_name), $("#profile-edit-email").val(a.email) }).catch(a => console.error(a)), $(document).on("click", a => { "submit-profile-edit" === a.target.id && axios.put(`/api/users/${UserInfo.id}`, { username: $("#profile-edit-username").val(), first_name: $("#profile-name-first").val(), last_name: $("#profile-name-last").val(), email: $("#profile-edit-email").val() }).then(() => { window.location.replace("/profile") }) }), $("#logout").on("click", () => { axios.get(`/api/users/logout`).then(() => { location.replace("./login") }).catch(a => console.error(a)) }), $(document).on("click", a => { a.target.classList.contains("bid-btn") && axios.put(`/api/items/popularity/${a.target.value}`).then(() => { }).catch(a => console.log(a)) }), $(document).on("click", a => { "edit-btn" === a.target.id && window.location.replace("/profile-edit") }), $(".startchat").on("click", a => { let b = a.target.id, c = $("#prodName").val(); axios.get(`/api/chat/newconvo/${b}/${c}`).then(({ data: a }) => { window.location.replace(`/chat?token=${a}`) }).catch(a => console.error(a)) }), $(document).on("click", a => { "edit-prod-listing" === a.target.id ? window.location.replace(`/product-edit/${a.target.value}`) : "edit-prod-btn" === a.target.id ? (a.preventDefault(), axios.put(`/api/items/${a.target.value}`, { name: $("#edit-product-title").val(), condition: $("#edit-item-condition").val(), price: $("#edit-price").val(), location: $("#edit-item-location").val(), description: $("#edit-description").val() }).then(() => { window.location.replace(`/products/${a.target.value}`) }).catch(a => console.error(a))) : "delete-listing-btn" === a.target.id ? (a.preventDefault(), axios.delete(`/api/items/${a.target.value}`).then(() => { window.location.replace("/profile") }).catch(a => console.error(a))) : "mark-sold-btn" === a.target.id ? (a.preventDefault(), axios.put(`/api/items/${a.target.value}`, { isSold: 1 }).then(() => { window.location.replace("/profile") }).catch(a => console.error(a))) : "unmark-sold-btn" === a.target.id && (a.preventDefault(), axios.put(`/api/items/${a.target.value}`, { isSold: 0 }).then(() => { window.location.replace("/profile") })) });